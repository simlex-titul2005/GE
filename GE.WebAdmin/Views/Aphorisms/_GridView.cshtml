@model VMAphorism[]
@{
    Layout = null;
    string categoryId = ViewBag.CategoryId;
}

@if (categoryId != null)
{
    @Html.SxGridView(Model,
                new SxExtantions.SxGridViewSettings<VMAphorism>
                {
                    Columns = new SxExtantions.SxGridViewColumn<VMAphorism>[]{
            new SxExtantions.SxGridViewColumn<VMAphorism>{FieldName="Title", Caption="Заголовок"},
            new SxExtantions.SxGridViewColumn<VMAphorism>{FieldName="Name", Caption="Автор",Template=(a)=> {
                return a.Author!=null? a.Author.Name:null;
            } },
            new SxExtantions.SxGridViewColumn<VMAphorism>{FieldName="Foreword", Caption="Вступление"},
            new SxExtantions.SxGridViewColumn<VMAphorism>{FieldName="Html", Caption="Содержание"},
            new SxExtantions.SxGridViewColumn<VMAphorism>{FieldName="Show", Caption="Показывать", Template=(a)=> {
                return a.Show?"Да":"Нет";
            } }
            },
                    DataAjaxUrl = "/aphorisms?curCat=" + categoryId,
                    EnableCreating=true,
                    CreateRowUrl= "/aphorisms/edit?curCat=" + categoryId+"&mct="+Enums.ModelCoreType.Aphorism,
                    EnableEditing=true,
                    EditRowUrl = x => { return "/aphorisms/edit/"+x.Id+"?curCat=" + categoryId + "&mct=" + Enums.ModelCoreType.Aphorism; },
                    RowCssClass = x => { return !x.Show ? "warning" : null; },
                    ShowPagerInfo=true
                }
        )
}