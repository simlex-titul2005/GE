@model VMMaterialCategory[]
@{
    Layout = null;
    var maxLevel = (int)ViewBag.MaxTreeViewLevel;
    var mct = (SX.WebCore.Enums.ModelCoreType)ViewBag.ModelCoreType;
    string cur = ViewBag.CurrentCategory ?? ViewContext.ParentActionViewContext.ViewBag.CategoryId;
    Func<VMMaterialCategory, string> funcContent = ViewBag.TreeViewMenuFuncContent;
}

@Html.SxTreeView(
    data: Model,
    settings: new SxExtantions.SxTreeViewTreeViewSettings<VMMaterialCategory>
    {
        FuncChildren = x => x.ChildCategories,
        FuncContent = funcContent,
        //FuncContent = x => string.Format("<a href=\"{0}\">{1}</a>", Url.Action(MVC.Aphorisms.Index(curCat: x.Id)), x.Title),
        FuncCreateUrl = () => Url.Action(MVC.MaterialCategories.Edit(mct: mct)),
        FuncCurLevel = x => x.Level,
        FuncEditUrl = x => Url.Action(MVC.MaterialCategories.Edit(mct: x.ModelCoreType, id: x.Id)),
        FuncEditSubNodeUrl = x => Url.Action(MVC.MaterialCategories.Edit(mct: mct, pcid: x.Id)),
        MaxLevel = maxLevel,
        FuncSearchUrl = () => Url.Action(MVC.MaterialCategories.Index()),
        UpdateTargetId = "matcat-tv",
        EnableEditing = false,
        EnableFiltering = false,
        FunActiveRow = x => String.Compare(x.Id, cur, true) == 0
    },
    htmlAttributes: new { @class = "sx-tv table table-condensed table-bordered table-responsive" }
    )
