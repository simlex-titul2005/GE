@model VMEditComment
@using Microsoft.AspNet.Identity;
@{
    Layout = null;
}

@using (Ajax.BeginForm(MVC.Comments.Create(), new AjaxOptions { HttpMethod = "post", UpdateTargetId = "comments-list", OnSuccess= "$('#new-comment #Html').val('')" }))
{
    @Html.AntiForgeryToken()
    @Html.HiddenFor(x => x.MaterialId)
    @Html.HiddenFor(x => x.ModelCoreType)

    if (!User.Identity.IsAuthenticated)
    {
        @Html.LabelFor(x => x.UserName)
        @Html.EditorFor(x => x.UserName, new { htmlAttributes = new { @class = "form-control", @placeholder = "Введите Ваше имя или ник" } })
        @Html.ValidationMessageFor(x => x.UserName)
        <br />
    }
    else
    {
        @Html.HiddenFor(x => x.UserName)
    }

    @Html.LabelFor(x => x.Html)
    @Html.EditorFor(x => x.Html, new { htmlAttributes = new { @class = "form-control", @placeholder = "Введите текст комментария" } })
    @Html.ValidationMessageFor(x => x.Html)
    <br />
    <button type="submit" class="btn btn-info btn-sm">Отправить</button>
}