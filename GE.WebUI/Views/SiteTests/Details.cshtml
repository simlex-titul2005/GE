@model SxVMSiteTestQuestion
@{
    ViewBag.Title = Model.Block != null && Model.Block.Test != null ? Model.Block.Test.Title : "Страница прохождения теста";
    ViewBag.H1 = ViewBag.H1 ?? ViewBag.Title;
    ViewBag.Description = ViewBag.Description ?? Model.Block != null && Model.Block.Test != null ? Model.Block.Test.Description : "Страница прохождения теста";
    ViewBag.Keywords = ViewBag.Keywords ?? "Игровые тесты, тесты для игр";
}

@if (Model.Block != null && Model.Block.Test != null)
{
    <div id="st-page">
        @Html.Partial("~/Views/SiteTests/_Step.cshtml", Model)
    </div>

    @section scripts{
        <script src="~/content/dist/js/jquery.unobtrusive-ajax.min.js"></script>
        <script type="text/javascript" src="~/share42/share42.js"></script>
        <script>
            $(function () {
                $('#st-page').on('click', '.sx-indicator > span', function () {
                    $span = $(this);
                    var text = $span.closest('li').find('.sx-indicator-txt').text();
                    var isCorrect = $span.data('dir') == true;

                    $form = $span.closest('form');
                    var count = $form.find('input[type="hidden"][class="pastQT"]').length;
                    $form.append('<input type="hidden" class="pastQT" name="[' + count + '].Order" value="' + (count + 1) + '" />');
                    $form.append('<input type="hidden" name="[' + count + '].Question.Text" value="' + text + '" />');
                    $form.append('<input type="hidden" name="[' + count + '].Question.IsCorrect" value="' + isCorrect + '" />');
                    $form.submit();
                });
            });
        </script>
    }
}